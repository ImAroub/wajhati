@model List<TripPlan>

@{
    ViewData["Title"] = "رحلاتي";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var cities = new[] { "Riyadh", "Jeddah" };
    var selectedCity = Context.Request.Query["city"].ToString();
}


<div class="container mt-5" dir="rtl">

    <div class="text-white p-4 rounded-top mb-0" style="background-color: #344c3d;">
        <h3 class="fw-bold mb-0">رحلاتي</h3>
    </div>

    <div class="text-white p-4 rounded-bottom mb-4" style="background-color: #344c3d;">
        <form method="get" asp-action="MyTrips">
            <div class="row gy-3 align-items-end">

                <div class="col-md-3">
                    <select id="cityFilter" name="city" class="form-select">
                        <option value="">كل المدن</option>
                        @foreach (var city in cities)
                        {
                            string cityArabic = city == "Riyadh" ? "الرياض" : "جدة";
                            <option value="@city" selected="@(selectedCity == city)">
                                @cityArabic
                            </option>
                        }
                    </select>
                </div>

                <div class="col-md-2">
                    <button type="submit" class="btn text-white fw-bold w-100" style="background-color:#667359;">بحث</button>
                </div>

            </div>
        </form>
    </div>



    <hr class="mt-5 mb-5">

    <div class="row mb-5" id="tripCards">
        @foreach (var trip in Model)
        {
            string cityArabic = trip.City switch
            {
                "Riyadh" => "الرياض",
                "Jeddah" => "جدة",
                _ => trip.City
            };

            <div class="col-md-6 mb-4 trip-card" data-city="@trip.City">
                <div class="card shadow rounded-4 h-100 ">

                    <div class="card-header text-white rounded-top-4 fw-bold text-end" style="background-color: #41634e;">
                        <h3>الرحلة إلى @cityArabic</h3> 
                    </div>

                    <div class="card-body text-center d-flex flex-column justify-content-between">
                        <p class="fw-bold fs-5 text-dark mt-4">عدد أيام الرحلة : @trip.NumberOfDays</p>

                        <div class="d-flex justify-content-center gap-2 mt-3">
                            <a asp-action="TripDetails" asp-route-id="@trip.Id" class="btn btn-sm text-white" style="background-color:#41634e;">
                                تفاصيل الرحلة
                            </a>
                            <a href="javascript:void(0);" class="btn btn-sm btn-danger delete-btn"
                               data-action="/Trip/DeleteTrip/@trip.Id">
                                حذف الرحلة
                            </a>
                        </div>
                    </div>

                </div>
            </div>
        }
    </div>
</div>

@section Scripts {
    <script src="~/js/site.js" asp-append-version="true"></script>
}
